<template name="library">
    {{#if userExists}}
    <div class="row">
        <ul class="nav nav-pills col-xs-10 col-xs-offset-2">
            <li class="active"><a href="{{pathForLibrary}}">Library</a></li>
            <li><a href="{{pathForProfile}}">Profile</a></li>
        </ul>
    </div>
    <div class="row">
        {{#with unsortedBooks}}
            {{#if this.count}}
                <div class="col-xs-12 col-sm-6 col-md-4">
                    <div class="well shelf">
                        <h2>Unsorted</h2>
                        <ul>
                            {{#each this}}
                            <li>
                                {{title}}
                            </li>
                            {{/each}}
                        </ul>
                    </div>
                </div>
            {{/if}}
        {{/with}}
        {{#each shelves}}
        <div class="col-xs-12 col-sm-6 col-md-4">
            <div class="well shelf">
                <h2>{{name}}</h2>
                <ul>
                    {{#each booksOnShelf}}
                        <li class="bookTitle">
                            {{title}}
                        </li>
                    {{else}}
                        {{#if allowEdits}}
                            This shelf is empty. <button class="deleteShelfButton">Delete Shelf</button>
                        {{/if}}
                    {{/each}}
                </ul>
            </div>
        </div>
        {{/each}}
        {{#if allowEdits}}
        <div class="col-xs-12 col-sm-6 col-md-4">
            <div class="well">
                <form class="newShelf">
                    <input type="text" id="shelfName" name="shelfName" placeholder="New Shelf" />
                    <input type="submit" class="glyphicon glyphicon-plus" />
                </form>
            </div>
        </div>
        {{/if}}
    </div>
    {{else}}
        This user does not exist.
    {{/if}}
</template>