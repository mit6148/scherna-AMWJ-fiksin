<template name="library">
    {{#if userExists}}
    <div class="row">
        {{#with userExists}}
            <!--<ul class="nav nav-pills col-xs-10 col-xs-offset-2">
                <li class="active"><a href="{{pathForLibrary}}">Library</a></li>
                <li><a href="{{pathForProfile}}">Profile</a></li>
                {{#if isMyAccount}}
                    <li><a href="{{pathForRequests}}">Requests</a></li>
                {{/if}}
            </ul>-->
            <div class="col-xs-12">
                <h2 style="text-align:center; font-family: 'Nunito', sans-serif; color: #333333; font-weight: 400;">{{username}}'s Library</h2>
                {{#if isMyAccount}}
                    <a href="{{pathForAddBook}}" class="btn btn-default pull-right">Add Book</a>
                {{/if}}
            </div>
        {{/with}}
    </div>
    <br>
    <div class="row row-centered">
            <!-- BOOK PREVIEW -->
                <div class="col-xs-12 col-sm-6 col-md-4">
                    <div class="well" style="background-color: #f8f8f8; height: 358px; width: 300px; overflow-y:scroll">
                        {{#if showPreview}}
                            {{#with currentBook}}
                                <div class="bookPreview" style="">
                                    <div class="row">
                                        <div class="col-xs-6">
                                            <img src="{{imageUrl}}" class="img-responsive" alt="Book Title" style="float:left; margin-top: 0px; width:120px;height:160px; margin-right: 20px">
                                        </div>
                                        <div class="col-xs-6">
                                            <h5 style="font-family: 'Nunito', sans-serif; color: #333333; font-weight: 400; text-align: left; margin-top: 0px">{{title}}</h5>
                                            <h5 style="font-family: 'Nunito', sans-serif; color: #333333; font-weight: 400; text-align: left; margin-top:13px">{{author}}</h5>
                                            <button class="button closeButton" style="margin-top:4px; margin-bottom:4px;border:0">Close Preview</button>
                                            <button type="button" class="button btn-danger deleteBook" style="margin-top:4px; margin-bottom:4px;">Remove Book from Library</button>
                                        </div>
                                    </div>
                                    <div class="row" style="margin-top:10px;">
                                        <div class="col-xs-12" style="">
                                            <span style="">{{stripHTML summary }}</span>
                                        </div>
                                    </div>
                                </div>
                            {{/with}}
                        {{/if}}
                    </div>
                </div>
            <!-- END OF BOOK PREVIEW -->        
        {{#with unsortedBooks}}
            {{#if this.count}}
                <div class="col-xs-12 col-sm-6 col-md-4">
                    <div id="deModal" class="well" style="background-color: #F8F8F8">
                        <h4 style="font-family: 'Nunito', sans-serif; color: #333333; font-weight: 400; margin-top: 0px; margin-bottom: 20px">Unsorted</h4>
                        <div class="scrollmenu">
                        {{#each this}}
                        <button class="bookTitle"></button>
                        {{/each}}
                        </div>
                    </div>
                </div>
            {{/if}}
        {{/with}}
        {{#each shelves}}
        <div class="col-xs-12 col-sm-6 col-md-4">
            <div class="well" style="background-color: #F8F8F8">
                <h4 style="font-family: 'Nunito', sans-serif; color: #333333; font-weight: 400; margin-top: 0px; margin-bottom: 20px;">{{name}}</h4>
                <div class="scrollmenu">
                    {{#each booksOnShelf}}
                        <button class="bookTitle"></button>
                    {{else}}
                    {{#if isMyAccount}}
                    This shelf is empty.
                    <button class="deleteShelfButton">Delete Shelf</button>
                    {{/if}}
                    {{/each}}
                </div>
            </div>
        </div>
        {{/each}}
        {{#if isMyAccount}}
        <div class="col-xs-12 col-sm-6 col-md-4">
            <div class="well">
                <form class="newShelf">
                    <input type="text" id="shelfName" name="shelfName" placeholder="New Shelf" style="border-color: #ebebeb; border-radius: 5px" />
                    <input type="submit" class="glyphicon glyphicon-plus" style="font-family: 'Nunito', sans-serif; color: #333333" />
                </form>
            </div>
        </div>
        {{/if}}
    </div>
    {{else}}
        This user does not exist.
    {{/if}}
</template>